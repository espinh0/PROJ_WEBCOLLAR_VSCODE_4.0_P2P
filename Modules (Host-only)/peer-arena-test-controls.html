<div class="card glass-background p-3">
  <div class="d-flex align-items-start justify-content-between flex-wrap gap-3">
    <div>
      <div class="text-uppercase text-secondary small fw-semibold">Controle de testes</div>
      <div class="fw-bold">Bots do Peer Arena</div>
      <div class="small text-secondary">Host precisa acionar. Ãštil para exercitar combate.</div>
    </div>
    <div class="d-flex align-items-center gap-2 flex-wrap">
      <div class="input-group input-group-sm" style="width: 160px;">
        <input id="peer-arena-test-bot-count" type="number" class="form-control" min="1" max="20" step="1" value="1" aria-label="Quantidade de bots" />
        <button id="peer-arena-test-add-bot" type="button" class="btn btn-success" aria-label="Adicionar bots">ğŸ¤– Add</button>
      </div>
      <button id="peer-arena-test-clear-bots" type="button" class="btn btn-outline-secondary btn-sm" aria-label="Limpar bots de teste">ğŸ§¹ Limpar bots</button>
      <button id="peer-arena-test-self-kill" type="button" class="btn btn-outline-danger btn-sm" aria-label="Morrer">ğŸ’€ Morrer</button>
      <button id="peer-arena-test-force-start" type="button" class="btn btn-primary btn-sm" aria-label="ForÃ§ar inÃ­cio">â© ForÃ§ar start</button>
      <button id="peer-arena-test-respawn" type="button" class="btn btn-outline-light btn-sm" aria-label="Ressuscitar">ğŸ©º Ressuscitar</button>
      <button id="peer-arena-test-heal" type="button" class="btn btn-outline-success btn-sm" aria-label="Adicionar vida">â• Vida</button>
      <button id="peer-arena-test-damage" type="button" class="btn btn-outline-warning btn-sm" aria-label="Remover vida">â– Vida</button>
    </div>
  </div>
</div>
<script>
(() => {
  const addBtn = document.getElementById("peer-arena-test-add-bot");
  const clearBtn = document.getElementById("peer-arena-test-clear-bots");
  const countInput = document.getElementById("peer-arena-test-bot-count");
  const killBtn = document.getElementById("peer-arena-test-self-kill");
  const forceStartBtn = document.getElementById("peer-arena-test-force-start");
  const respawnBtn = document.getElementById("peer-arena-test-respawn");
  const healBtn = document.getElementById("peer-arena-test-heal");
  const damageBtn = document.getElementById("peer-arena-test-damage");

  function dispatchBotControl(action) {
    window.dispatchEvent(new CustomEvent("peer-arena:bot-control", { detail: { action } }));
  }

  if (addBtn) addBtn.addEventListener("click", () => {
    const n = Math.max(1, Math.min(20, parseInt(countInput?.value, 10) || 1));
    for (let i = 0; i < n; i++) dispatchBotControl("add");
  });
  if (clearBtn) clearBtn.addEventListener("click", () => dispatchBotControl("clear"));
  if (killBtn) killBtn.addEventListener("click", () => dispatchBotControl("self-kill"));
  if (forceStartBtn) forceStartBtn.addEventListener("click", () => dispatchBotControl("force-start"));
  if (respawnBtn) respawnBtn.addEventListener("click", () => dispatchBotControl("respawn"));
  if (healBtn) healBtn.addEventListener("click", () => dispatchBotControl("heal"));
  if (damageBtn) damageBtn.addEventListener("click", () => dispatchBotControl("damage"));
})();
</script>
